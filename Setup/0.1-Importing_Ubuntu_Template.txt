======================
Ubuntu Template
======================

----------------------------------------
Step-00: Exporting a VM Template
----------------------------------------

	//Skip this if you already have a backup Virtual Machine Template

	•	Create a new Virtual Machine to be used as a template.

		//Refer to Ubuntu Installation Instruction.

	•	Set login credentials:

			Your name: LGU Template

			Server name: etracs-server-template

			User name: lgutemplate

			User pass: p@ssw0rd


	•	Install Webmin:

		//Refer to 1-Installing_Webmin.txt

	•	Setup Shared Folders:

		//Refer to 3-Setup_Shared_Folder.txt

	•	Exit session

			$ exit


	•	Shutdown the virtual machine template.

	•	Right-click on the virtual machine you want to export and click export.

	•	Export Virtual Machine prompt will appear.

		//Browse to the location you want to export your virtual machine as a backup.

		or

			C:\Hyper-V\backup\


-----------------------------------------------
Step-01: Importing a Virtual Machine Template
-----------------------------------------------

	•	Import Virtual Machine Template
	•	Locate the 

			C:\Hyper-V\backup\

			or 

			Browse to the location of your exported virtual machine template.

	•	Select "Copy the virtual machine (create a new unique ID)"
	•	Check "Store the virtual machine in a different location"

		Browse virtual machine configuration folder and create new folder

			C:\Hyper-V\{New Folder}

	•	Choose Storage Folders

			C:\Hyper-V\{New Folder}

	• Click "Finish"

	• Rename newly created VM to desired VM name.

		//Check virtual machine created date to confirm it is the new one.

	• Start and connect to VM.


-------------------------------------------
Step-02: Configuration of New Imported VM
-------------------------------------------

I. Create root user:

	•	Log in to Ubuntu using credentials:

			login: 		lgutemplate
			password:	p@ssw0rd

	•	Check network configurations if working.
	•	Add a root user password:

			$ sudo passwd root

			#input sudo password for lgutemplate
			#input new UNIX password
			#retype new UNIX password

			$ exit

	• 	Log in as root:

			login: 		root
			password:	p@ssw0rd

II. Configuration of username & hostname:

	• 	Modifying new username & home directory:

			~# usermod -l {newusername} lgutemplate
			~# usermod -d /home/{newusername} -m {newusername}
			~# chfn -f {newusername} {newusername}
			~# exit

			login as {newusername}

	•	Modifying new hostname:

			$ sudo hostnamectl set-hostname {newhostname}
			$ sudo nano /etc/hosts

				//add {newhostname} in line 2 
				:1 	xxxxxxxx xxxxxx {newhostname}

				# Press Ctrl X then press Y then press ENTER to save changes

			$ exit

III. Configuration of smb.conf to access Shared Folders

	• Check Installation of Samba

		$ sudo apt-get update 

		$ sudo systemctl status nmbd

		$ sudo smbpasswd -a $USER

  			 //add password: 1234

  		$ cd /etc/samba

		$ sudo cp smb.conf smb.conf.backup

		$ sudo nano smb.conf 

		#
		# Go to the bottom of the file and add the following lines below 
		# Change the "lgutemplate" to the actual user account that you are using
		# 
		[{newusername}]
		   path = /home/{newusername}
		   browseable = yes
		   read only = no
		   valid users = @{newusername} {newusername}

		# 
		# Press Ctrl X then press Y then press ENTER to save changes

		$ sudo systemctl restart nmbd

		# 
		# If firewall is enabled
		# 
		$ sudo ufw allow 'Samba'


		
	•	Test Connect to your Shared Folder
	

		NOTE: Do this steps in your windows machine. 

		1. Press WINDOWS logo + R  to open the RUN dialog box 

		2. In the Open text field type the following and press ENTER key.

		   \\{SERVER_IP}

		3. You should be able to see the "root" or "lgutemplate" folder or the folder you setup 
		   from Step#2 and when you go inside the folder, a login screen should appear. 

		4. Done.



